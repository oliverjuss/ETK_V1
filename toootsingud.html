<!DOCTYPE html>
<html lang="et">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tööotsingud - ETK</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script>
        // Demo Google Maps implementation (no API key needed)
        window.initMap = function() {
            console.log('Initializing demo Google Maps');
            
            // Create a styled demo map that looks like Google Maps
            const mapContainer = document.getElementById('google-map');
            console.log('Map container found:', mapContainer);
            console.log('Map container dimensions:', mapContainer ? `${mapContainer.offsetWidth}x${mapContainer.offsetHeight}` : 'N/A');
            console.log('Map container style:', mapContainer ? mapContainer.style.cssText : 'N/A');
            
            if (mapContainer) {
                console.log('Setting innerHTML for map container');
                mapContainer.innerHTML = `
                    <div style="
                        width: 100%; 
                        height: 100%; 
                        background: linear-gradient(135deg, #e8f5e8 0%, #c8d7d4 100%);
                        position: relative;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-family: Inter, sans-serif;
                        border-radius: 8px;
                        min-height: 280px;
                    ">
                        <div style="
                            background: rgba(255,255,255,0.9);
                            padding: 20px;
                            border-radius: 8px;
                            text-align: center;
                            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                        ">
                            <div style="
                                width: 12px;
                                height: 12px;
                                background: #046c63;
                                border-radius: 50%;
                                margin: 0 auto 8px auto;
                                border: 2px solid white;
                                box-shadow: 0 2px 4px rgba(0,0,0,0.2);
                            "></div>
                            <h6 style="margin: 0 0 4px 0; font-size: 14px; font-weight: 600; color: #333;">Keila linn</h6>
                            <p style="margin: 0; font-size: 12px; color: #666;">Demo kaart</p>
                        </div>
                    </div>
                `;
                console.log('Demo map HTML set successfully');
                console.log('Map container after update:', mapContainer.innerHTML.length, 'characters');
                return true;
            } else {
                console.log('Map container not found!');
                return false;
            }
        }
        
        // Test function to manually open success modal with map
        window.testMapModal = function() {
            console.log('Testing map modal');
            const modal = document.getElementById('job-saved-modal');
            if (modal) {
                modal.style.display = 'flex';
                setTimeout(() => {
                    window.initMap();
                }, 200);
            }
        }
    </script>
</head>
<body>
    <header class="main-header">
        <div class="top-bar">
            <div class="logo-nav">
                <span class="logo">ETK</span>
                <a href="#" class="help-link">Juhendid ja abimaterjalid</a>
            </div>
            <div class="search-container">
                <input type="text" placeholder="Otsi kodulehe sisust">
                <svg class="search-icon" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
            </div>
            <div class="user-actions">
                <button class="profile-button">
                    <span class="user-name">Kaisa Karu</span>
                    <svg class="dropdown-icon" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                    </svg>
                </button>
            </div>
        </div>
    </header>
    <div class="sub-nav-bar-container">
        <div class="sub-nav-bar">
            <a href="#" class="back-link">
                <svg width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
                Tagasi Infoportaali
            </a>
            <button class="mobile-menu-toggle" id="mobile-menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <nav class="main-nav" id="main-nav">
                <a href="#" class="nav-item">
                    Minu töötukassa
                </a>
                <a href="#" class="nav-item">
                    Arvelevõtmine
                </a>
                <a href="index.html" class="nav-item">
                    Minu plaan
                </a>
                <a href="#" class="nav-item">
                    Toetused ja hüvitised
                </a>
                <a href="#" class="nav-item">
                    Teenused
                </a>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link active">
                        Tööotsingud
                        <svg class="dropdown-arrow" width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7 10l5 5 5-5z"/>
                        </svg>
                    </a>
                    <div class="dropdown-menu">
                        <a href="minuCV.html" class="dropdown-item">Minu CV</a>
                        <a href="#" class="dropdown-item">Minu kandideerimised</a>
                    </div>
                </div>
                <a href="toovoimehindamine.html" class="nav-item">
                    Töövõime
                </a>
            </nav>
        </div>
    </div>

    <div class="page-container">
      
        <h1 style="margin: 32px 0 24px 0; font-size: 2rem; font-weight: 600; color: var(--text-color);">Tööpakkumised</h1>
        
        <!-- Statistics Grid -->
        <div class="stats-grid">
            <div class="stat-card card" style="display: flex; flex-direction: column; justify-content: space-between;">
                <h3>Sobivad tööpakkumised</h3>
                <div class="stat-number">3</div>
            </div>
            <div class="stat-card card" style="display: flex; flex-direction: column; justify-content: space-between;">
                <h3>Aktiivsed kandideerimised</h3>
                <div class="stat-number">5</div>
            </div>
            <div class="stat-card card" style="display: flex; flex-direction: column; justify-content: space-between;">
                <h3>Meelde jäetud tööpakkumisi</h3>
                <div class="stat-number">5</div>
            </div>
            <div class="stat-card card" style="display: flex; flex-direction: column; justify-content: space-between;">
                <h3>Kandideerimise kutseid</h3>
                <div class="stat-number">1</div>
            </div>
            <div class="stat-card card" style="display: flex; flex-direction: column; justify-content: space-between;">
                <h3>AI soovitatud tööpakkumised</h3>
                <div class="stat-number">3</div>
            </div>
        </div>

        <!-- Job Offers Section -->
        <div class="job-offers-section" style="margin-top: 32px;">
            <div class="job-offers-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; position: relative;">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <h2 style="margin: 0; font-size: 1.5rem; color: var(--text-color);">Sobivad tööpakkumised</h2>
                </div>
            </div>

            <div class="job-listings-container">
                <!-- Job 1: IT Projektijuht (Digiraju) -->
                <div class="job-card">
                    <div class="job-card-header">
                        <div class="job-title-section">
                            <div>
                                <h3>IT Projektijuht</h3>
                                <p>Digiraju OÜ • Tallinn</p>
                            </div>
                        </div>
                        <div class="match-badge" style="background: var(--primary-color); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: 500;">92% sobivus</div>
                    </div>
                    <div class="job-card-details">
                        <span class="detail-tag">Tallinn</span>
                        <span class="detail-tag">3200-4200€</span>
                        <span class="detail-tag">Täistööaeg</span>
                        <span class="detail-tag">Hübriid (2 p. kontoris)</span>
                    </div>
                    <p class="job-card-description">Otsime IT projektijuhti, kes juhiks tarkvaraarendusprojekte. Vajalik varasem kogemus SCRUM metoodikaga ja tugev koostööoskus klientidega.</p>
                    <div class="job-card-footer">
                        <span class="posted-date">Lisatud 1 päev tagasi</span>
                        <div class="action-buttons" style="display: flex; gap: 8px;">
                            <button class="btn btn-outline">Ei sobi</button>
                            <button class="btn btn-outline">Jätan meelde</button>
                            <button class="btn btn-primary">Kandideeri</button>
                        </div>
                    </div>
                </div>

                <!-- Job 2: IT Projektijuht (CloudPoint) -->
                <div class="job-card">
                    <div class="job-card-header">
                        <div class="job-title-section">
                            <div>
                                <h3>IT Projektijuht</h3>
                                <p>CloudPoint AS • Tartu</p>
                            </div>
                        </div>
                        <div class="match-badge" style="background: var(--primary-color); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: 500;">88% sobivus</div>
                    </div>
                    <div class="job-card-details">
                        <span class="detail-tag">Tartu</span>
                        <span class="detail-tag">3500-4500€</span>
                        <span class="detail-tag">Täistööaeg</span>
                        <span class="detail-tag">Kaugtöö</span>
                    </div>
                    <p class="job-card-description">Vajame IT projektijuhti pilvelahenduste juurutamiseks ning tiimi koordineerimiseks. Sobib, kui sul on kogemus rahvusvaheliste projektidega ning tugev tehniline taust.</p>
                    <div class="job-card-footer">
                        <span class="posted-date">Lisatud 4 päeva tagasi</span>
                        <div class="action-buttons" style="display: flex; gap: 8px;">
                            <button class="btn btn-outline">Ei sobi</button>
                            <button class="btn btn-outline">Jätan meelde</button>
                            <button class="btn btn-primary">Kandideeri</button>
                        </div>
                    </div>
                </div>

                <!-- Job 3: Vanemanalüütik -->
                <div class="job-card">
                    <div class="job-card-header">
                        <div class="job-title-section">
                            <div>
                                <h3>Vanemanalüütik</h3>
                                <p>DataMinds OÜ • Tallinn</p>
                            </div>
                        </div>
                        <div class="match-badge" style="background: var(--primary-color); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: 500;">90% sobivus</div>
                    </div>
                    <div class="job-card-details">
                        <span class="detail-tag">Tallinn</span>
                        <span class="detail-tag">2800-3700€</span>
                        <span class="detail-tag">Täistööaeg</span>
                        <span class="detail-tag">Hübriid (1 p. kodus)</span>
                    </div>
                    <p class="job-card-description">Otsime vanemanalüütikut äriprofesside ja andmeanalüüsi projektidesse. Eeldame SQL oskust, kogemust BI tööriistadega ning head analüütilisi mõtlemist.</p>
                    <div class="job-card-footer">
                        <span class="posted-date">Lisatud 2 päeva tagasi</span>
                        <div class="action-buttons" style="display: flex; gap: 8px;">
                            <button class="btn btn-outline">Ei sobi</button>
                            <button class="btn btn-outline">Jätan meelde</button>
                            <button class="btn btn-primary">Kandideeri</button>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Second AI Recommendations Header -->
            <div class="job-offers-header accordion-header" style="display: flex; justify-content: space-between; align-items: center; margin: 32px 0 0 0; position: relative; padding: 16px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 8px; cursor: pointer; transition: all 0.3s ease; border: 1px solid #dee2e6;" onclick="toggleAccordion('skills-accordion')" onmouseover="this.style.background='linear-gradient(135deg, #e9ecef 0%, #f8f9fa 100%)'; this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.1)'" onmouseout="this.style.background='linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <a href="#" id="open-ai-job-recommendations-modal" class="ai-icon-link" title="Tööpakkumiste soovitused">AI</a>
                    <h2 style="margin: 0; font-size: 1.5rem; color: var(--text-color);">Oskuste põhjal soovitatud tööpakkumised</h2>
                    <span class="job-count" style="background: var(--primary-color); color: white; padding: 4px 10px; border-radius: 16px; font-size: 0.8rem; font-weight: 600; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">6</span>
                    <span style="font-size: 0.9rem; color: #6c757d; font-weight: 500;">Klõpsa avamiseks</span>
                </div>
                <div style="display: flex; align-items: center; gap: 12px;">
                    <svg class="accordion-arrow" width="24" height="24" style="transition: all 0.3s ease; transform: rotate(-90deg); color: var(--primary-color);" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                    </svg>
                </div>
            </div>

            <div class="accordion-content" id="skills-accordion" style="display: none; margin-top: 0; overflow: hidden; transition: all 0.3s ease;">
                <div class="job-listings-container" style="padding-top: 24px; background: linear-gradient(to bottom, #f8f9fa 0%, transparent 20px);"

                <!-- Job 4: IT Projektijuht (TechNordic) -->
                <div class="job-card" id="first-skills-job">
                    <div class="job-card-header">
                        <div class="job-title-section">
                            <div>
                                <h3>IT Projektijuht</h3>
                                <p>TechNordic OÜ • Tallinn</p>
                            </div>
                        </div>
                        <div class="match-badge" style="background: var(--primary-color); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: 500;">94% sobivus</div>
                    </div>
                    <div class="job-card-details">
                        <span class="detail-tag">Tallinn</span>
                        <span class="detail-tag">3800-5200€</span>
                        <span class="detail-tag">Täistööaeg</span>
                        <span class="detail-tag">Hübriid (3 p. kontoris)</span>
                    </div>
                    <p class="job-card-description">Otsime kogenud IT projektijuhti, kes juhiks meie rahvusvahelisi digitaliseerimisprojekte. Vajalik PMP sertifikaat ja kogemus agiile metoodikatega.</p>
                    <div class="job-card-footer">
                        <span class="posted-date">Lisatud täna</span>
                        <div class="action-buttons" style="display: flex; gap: 8px;">
                            <button class="btn btn-outline">Ei sobi</button>
                            <button class="btn btn-outline">Jätan meelde</button>
                            <button class="btn btn-primary">Kandideeri</button>
                        </div>
                    </div>
                </div>

                <!-- Job 5: Digitaalsete projektide juht -->
                <div class="job-card">
                    <div class="job-card-header">
                        <div class="job-title-section">
                            <div>
                                <h3>Digitaalsete projektide juht</h3>
                                <p>DigiTarkus OÜ • Kaugtöö</p>
                            </div>
                        </div>
                        <div class="match-badge" style="background: var(--primary-color); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: 500;">91% sobivus</div>
                    </div>
                    <div class="job-card-details">
                        <span class="detail-tag">Kaugtöö</span>
                        <span class="detail-tag">3000-4300€</span>
                        <span class="detail-tag">Täistööaeg</span>
                        <span class="detail-tag">Paindlik graafik</span>
                    </div>
                    <p class="job-card-description">Otsime digitaalsete projektide juhti, kes koordineeriks veebirakenduste ja mobiilirakenduste arendusprojekte. Oluline on kogemus digitaalse transformatsiooni valdkonnas.</p>
                    <div class="job-card-footer">
                        <span class="posted-date">Lisatud 3 päeva tagasi</span>
                        <div class="action-buttons" style="display: flex; gap: 8px;">
                            <button class="btn btn-outline">Ei sobi</button>
                            <button class="btn btn-outline">Jätan meelde</button>
                            <button class="btn btn-primary">Kandideeri</button>
                        </div>
                    </div>
                </div>

                <!-- Job 6: Scrum Master -->
                <div class="job-card">
                    <div class="job-card-header">
                        <div class="job-title-section">
                            <div>
                                <h3>Scrum Master</h3>
                                <p>TechFlow AS • Tallinn</p>
                            </div>
                        </div>
                        <div class="match-badge" style="background: var(--accent-color); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: 500;">62% sobivus</div>
                    </div>
                    <div class="job-card-details">
                        <span class="detail-tag">Tallinn</span>
                        <span class="detail-tag">2800-3500€</span>
                        <span class="detail-tag">Täistööaeg</span>
                        <span class="detail-tag">Hübriid (2 p. kontoris)</span>
                    </div>
                    <p class="job-card-description">Otsime Scrum Masterit meie agiilsete arendusmeeskondade toetamiseks. Vajalik sertifikaat ja kogemus Agile metoodikatega. Oluline on tugev kommunikatsioonioskus ja võime juhtida meeskonnatööd.</p>
                    <div class="job-card-footer">
                        <span class="posted-date">Lisatud 5 päeva tagasi</span>
                        <div class="action-buttons" style="display: flex; gap: 8px;">
                            <button class="btn btn-outline">Ei sobi</button>
                            <button class="btn btn-outline">Jätan meelde</button>
                            <button class="btn btn-primary">Kandideeri</button>
                        </div>
                    </div>
                </div>

                <!-- Job 7: IT Arendaja -->
                <div class="job-card">
                    <div class="job-card-header">
                        <div class="job-title-section">
                            <div>
                                <h3>IT Arendaja</h3>
                                <p>CodeCraft OÜ • Tallinn</p>
                            </div>
                        </div>
                        <div class="match-badge" style="background: var(--primary-color); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: 500;">85% sobivus</div>
                    </div>
                    <div class="job-card-details">
                        <span class="detail-tag">Tallinn</span>
                        <span class="detail-tag">2500-3200€</span>
                        <span class="detail-tag">Täistööaeg</span>
                        <span class="detail-tag">Hübriid (2 p. kontoris)</span>
                    </div>
                    <p class="job-card-description">Otsime IT arendajat meie meeskonda, kes töötaks veebirakenduste ja mobiilirakenduste arendamisel. Vajalik kogemus JavaScript, React ja Node.js tehnoloogiatega.</p>
                    <div class="job-card-footer">
                        <span class="posted-date">Lisatud 2 päeva tagasi</span>
                        <div class="action-buttons" style="display: flex; gap: 8px;">
                            <button class="btn btn-outline">Ei sobi</button>
                            <button class="btn btn-outline">Jätan meelde</button>
                            <button class="btn btn-primary">Kandideeri</button>
                        </div>
                    </div>
                </div>

                <!-- Job 8: Tootejuht (IT) -->
                <div class="job-card">
                    <div class="job-card-header">
                        <div class="job-title-section">
                            <div>
                                <h3>Tootejuht (IT)</h3>
                                <p>InnoTech Solutions • Tallinn</p>
                            </div>
                        </div>
                        <div class="match-badge" style="background: var(--accent-color); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: 500;">76% sobivus</div>
                    </div>
                    <div class="job-card-details">
                        <span class="detail-tag">Tallinn</span>
                        <span class="detail-tag">3500-4800€</span>
                        <span class="detail-tag">Täistööaeg</span>
                        <span class="detail-tag">Hübriid (1 p. kodus)</span>
                    </div>
                    <p class="job-card-description">Otsime tootejuhti IT lahenduste arendamiseks. Vajalik kogemus kasutajakogemuse disaini ja tootearenduse protsessidega. Oluline on analüütiline mõtlemine ja meeskonnatöö oskus.</p>
                    <div class="job-card-footer">
                        <span class="posted-date">Lisatud 1 nädal tagasi</span>
                        <div class="action-buttons" style="display: flex; gap: 8px;">
                            <button class="btn btn-outline">Ei sobi</button>
                            <button class="btn btn-outline">Jätan meelde</button>
                            <button class="btn btn-primary">Kandideeri</button>
                        </div>
                    </div>
                </div>

                <!-- Job 9: IT Konsultant -->
                <div class="job-card">
                    <div class="job-card-header">
                        <div class="job-title-section">
                            <div>
                                <h3>IT Konsultant</h3>
                                <p>DigitalAdvice OÜ • Tartu</p>
                            </div>
                        </div>
                        <div class="match-badge" style="background: var(--primary-color); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: 500;">82% sobivus</div>
                    </div>
                    <div class="job-card-details">
                        <span class="detail-tag">Tartu</span>
                        <span class="detail-tag">2900-3800€</span>
                        <span class="detail-tag">Täistööaeg</span>
                        <span class="detail-tag">Kaugtöö võimalus</span>
                    </div>
                    <p class="job-card-description">Vajame IT konsultanti äriklientide nõustamiseks digitaliseerimise valdkonnas. Sobib, kui sul on kogemus erinevate IT süsteemide juurutamisega ja klientide koolitamisega.</p>
                    <div class="job-card-footer">
                        <span class="posted-date">Lisatud 6 päeva tagasi</span>
                        <div class="action-buttons" style="display: flex; gap: 8px;">
                            <button class="btn btn-outline">Ei sobi</button>
                            <button class="btn btn-outline">Jätan meelde</button>
                            <button class="btn btn-primary">Kandideeri</button>
                        </div>
                    </div>
                </div>

                </div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced accordion functionality with smooth animations and auto-scroll
        function toggleAccordion(accordionId) {
            const content = document.getElementById(accordionId);
            const arrow = content.previousElementSibling.querySelector('.accordion-arrow');
            const header = content.previousElementSibling;
            const hintText = header.querySelector('span[style*="Klõpsa"]');
            
            if (content.style.display === 'none' || content.style.display === '') {
                // Opening animation
                content.style.display = 'block';
                content.style.maxHeight = '0px';
                content.style.opacity = '0';
                
                // Trigger animation
                setTimeout(() => {
                    content.style.maxHeight = '2000px';
                    content.style.opacity = '1';
                    arrow.style.transform = 'rotate(0deg)';
                    arrow.style.color = '#28a745';
                    if (hintText) hintText.textContent = 'Klõpsa sulgemiseks';
                    
                    // Auto-scroll to first job after animation completes
                    setTimeout(() => {
                        const firstJob = document.getElementById('first-skills-job');
                        if (firstJob) {
                            firstJob.scrollIntoView({ 
                                behavior: 'smooth', 
                                block: 'start',
                                inline: 'nearest' 
                            });
                        }
                    }, 300);
                }, 10);
                
            } else {
                // Closing animation
                content.style.maxHeight = '0px';
                content.style.opacity = '0';
                arrow.style.transform = 'rotate(-90deg)';
                arrow.style.color = 'var(--primary-color)';
                if (hintText) hintText.textContent = 'Klõpsa avamiseks';
                
                setTimeout(() => {
                    content.style.display = 'none';
                }, 300);
            }
        }

        // Add keyboard accessibility
        document.addEventListener('DOMContentLoaded', function() {
            const accordionHeader = document.querySelector('.accordion-header');
            if (accordionHeader) {
                accordionHeader.setAttribute('tabindex', '0');
                accordionHeader.setAttribute('role', 'button');
                accordionHeader.setAttribute('aria-expanded', 'false');
                accordionHeader.setAttribute('aria-label', 'Oskuste põhjal soovitatud tööpakkumised - klõpsa avamiseks');
                
                accordionHeader.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        toggleAccordion('skills-accordion');
                    }
                });
            }
        });
    </script>
    <script src="script.js"></script>
</body>
</html>